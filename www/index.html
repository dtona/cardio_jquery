<!DOCTYPE html>
<html class="bg1">
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta http-equiv="Content-Language" content="es"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
	<link rel="stylesheet" href="css/reset.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="css/bootstrap-theme.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" charset="utf-8" />
	<link rel="stylesheet" href="css/template-style.css" type="text/css" charset="utf-8" />
	<link rel="stylesheet" href="css/w3.css">
    <title>Tutorial</title>
</head>
<body>
	<div id="test" style="position:absolute;top:0px;right:0px;width:33.33%;height:100%;z-index:99;display:none;"></div>
	<div id="template-up">
   		<nav class="w3-sidenav w3-imss3 menuHor" style="overflow: auto;direction: rtl;">
			<header class="w3-container w3-imss3 w3-center">
				<h1><i class="w3-xxlarge fa fa-heartbeat"></i>  Tutorial Código Infarto</h1>
      		</header>
        	<hr>

			<ul class="w3-ul">
        		<li><a href="#"><i class="w3-large fa fa-home"></i> Inicio</a></li>
        		<li><a href="#"><i class="w3-large fa fa-bullseye"></i> Objetivo</a></li>
        		<li><a href="#"><i class="w3-large fa fa-file-text-o"></i> Contextualización</a></li>
        		<li><a href="#"><i class="w3-large fa fa-hospital-o"></i> Primer y segundo nivel</a></li>
        		<li><a href="#page6"><i class="w3-large fa fa-circle"></i> Coordinador del Código Infarto</a></li> 
        		<li><a href="#page8"><i class="w3-large fa fa-circle"></i> Personal de Vigilancia</a></li>    
        		<li><a href="#page9"><i class="w3-large fa fa-circle"></i> Asistente médica de Urgencias</a></li> 
        		<li><a href="#page10"><i class="w3-large fa fa-circle"></i> Personal de Camillería</a></li>     
        		<li><a href="#page11"><i class="w3-large fa fa-circle"></i> Personal de Trabajo Social</a></li>  
        		<li><a href="#page12"><i class="w3-large fa fa-circle"></i> Médico asignado al Triage</a></li>  
        		<li><a href="#page13"><i class="w3-large fa fa-circle"></i> Médico de Urgencias de primer contacto responsable del Código</a></li>       
        		<li><a href="#page17"><i class="w3-large fa fa-circle"></i> Enfermera general y/o Especialista (asignada al Código infarto)</a></li>           
        		<li><a href="#page19"><i class="w3-large fa fa-hospital-o"></i><i class="w3-large fa fa-hospital-o"></i> Tercel nivel</a></li>           
        		<li><a href="#page21"><i class="w3-large fa fa-circle"></i> Coordinador del Código infarto</a></li> 
        		<li><a href="#page22"><i class="w3-large fa fa-circle"></i> Médico de Urgencias responsable del Código infarto en la Unidad Médica con sala de hemodinamia</a></li>
        		<li><a href="#page26"><i class="w3-large fa fa-circle"></i> Cardiólogo(a) intervencionista responsable</a></li>
        		<li><a href="#page33"><i class="w3-large fa fa-circle"></i> Médico responsable del Código infarto especialista en la UCI</a></li>
     			<li><a href="#page33"><i class="w3-large fa fa-circle"></i> Paciente</a></li>   
    			<li><a href="#page33"><i class="w3-large fa fa-circle"></i> Mejoras que se esperan con el Código infarto</a></li>
        		<li><a href="#"><i class="w3-large fa fa-users"></i> Créditos</a></li>
      		</ul>
    	</nav>

        <header id="header">
			<div class="container">
				<div class="logo">
					<img id="course_logo" src="images/course_logo.png" alt="">
					<br>
				</div>
                <nav id="nav">
					<button id="btnMenu" type="button" class="btn btn-warning" data-toggle="modal" data-target="#myModal"><i class="fa fa-bars"></i></button>
                </nav>
            </div>
        </header>
    </div>

    <!--<div id="main">
		<div id="content"></div>
    </div>-->

    <div id="main"></div>

	<div id="template-down">
		<footer>
			<div class="container">
				<nav id="nav">
					<div id="btnNext" class="btn-nav"><i class="fa fa-arrow-right"></i></div>
					<div id="btnPrev" class="btn-nav"><i class="fa fa-arrow-left"></i></div>
                </nav>
            </div>
        </footer>
    </div>
    
    <!-- Modal
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
        	<div class="modal-content">
          		<div class="modal-header">
            		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              		<img id="menuLabel" src="content/images/logo_curso.png" alt="">            
          		</div>
          		<div class="modal-body">
            		<button type="button" class="btn btn-default btn-lg btn-block"><b>Inicio</b></button>
            		<button type="button" class="btn btn-default btn-lg btn-block"><b>Objetivo</b></button>
            		<button type="button" class="btn btn-default btn-lg btn-block"><b>Contextualización</b></button>
            		<button type="button" class="btn btn-default btn-lg btn-block"><b>Primer y Segundo Nivel</b></button>
              		<button type="button" class="btn btn-default btn-lg btn-block"><b>Tercer Nivel</b></button>
          		</div>
          		<div class="modal-footer">
            		<button type="button" class="btn btn-warning">Créditos</button>
          		</div>
        	</div>
      	</div>
    </div> -->

    <script src="cordova.js"></script>
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/TweenMax.min.js"></script>
	<script src="js/config.js"></script>
    <!--<script src="js/api-conect.js"></script>-->
    <!--<script src="js/tracking.js"></script>-->
    <!--<script src="js/bootstrap.min.js"></script>-->
	<script>
	var currentPage = 0,
	    lastPage = 0,
	    curseStatus = '',
	    curseCompleted = false,
	    btnNext,
	    btnPrev,
	    content,
	    menuHor;

	$(function() {

		resize();

	    btnNext = $('#btnNext');
	    btnPrev = $('#btnPrev');    
	    
	    btnNext.hide(0);
	    btnPrev.hide(0);

	    content = $('#main');
    	menuHor = $('.menuHor:first');    	

	    if (conection) {
	        
	        if (getAPI()) {
	            checkProgress();
	        } else {
	            errorAPI();
	            goPage(0);
	        }

	    } else {
	        goPage(0);
	    }

    	$('#btnMenu').click(function() {
    		btnMenu();
    	});

    	$('.w3-ul li').click(function(e) {
    		e.preventDefault();    		
    		var href = $('a', this).attr('href');    		
    		href = href.substr(1, href.length -1);
    		if (href.length == 0) {
    			alert('No tiene link');
    		} else {    			

    			var index = findWithAttr(course.pages, 'url', href + '.html');

    			//alert('href>>' + href);
    			//alert("index>>" + index);    			

    			if (index != undefined) {    				
    				goPage(index);    	
    				btnMenu();
    			} else {
    				alert('undefined');
    			}
    		}
    	});

	    $('#btnNext').click(function(){
	        if ((currentPage + 1) < course.pages.length) {
	        	++currentPage;
	        	loadContent();
	        } else {
	        	//console.log('Error - Ya no hay más páginas después');
	        }
	    });

	    $("#btnPrev").click(function(){
	        if (currentPage > 0) {
	        	--currentPage;
	        	loadContent();
	        } else {
	        	//console.log('Error - Ya no hay más páginas antes');
	        }
	    });    

	    $(window).resize(function(){
	    	resize();
	    });	    

	    $('div#test').click(function() {
	    	btnMenu();
	    });	    
	});

	function findWithAttr(array, attr, value) {
	    for (var i = 0, len = array.length; i < len; i++) {
	        if (array[i][attr] === value) {
	        	return i;
	        }
	    }
	}

	function resize() {		
	    var headerHeight = $('#template-up').height();
	    var footerHeight = $('#template-down').outerHeight();
	    var mainHeight = $(window).height() - headerHeight - footerHeight;
	    $('#main').css('height', mainHeight);
	    $('#main').css('margin-top', headerHeight);
	}

	function btnMenu() {
		if (menuHor.is(":hidden")) {
			menuHor.show(0);
			$('div#test').show(0);
		} else {
			menuHor.hide(0);
			$('div#test').hide(0);
		}
	}	

	function loadContent() {
	    
	    content.html('<iframe name="com" id="com" src="' + contentPath + course.pages[currentPage].url + '" frameborder="0" scrolling="no" border="0"></iframe>');
	    //var iframeHeight = parseInt($("iframe#com").css("height"), 10);
	    //alert(iframeHeight);
	    //iframeHeight = iframeHeight - 36;	    
	    //$("iframe#com").css("height", iframeHeight + "px");
	    //alert($("iframe#com").css("height"));
	    //content.html('<object width="100%" height="500px" data="' + contentPath + course.pages[currentPage].url + '"></object>');
	    //$('title').text(course.pages[currentPage].title);
	    //$("#com").mCustomScrollbar();

	    updateTracking();
	}

	/*function checkProgress() {
	    //Función para revisar el avance
	}*/

	function goPage(pageID) {

	    if (currentPage != pageID) {
	        lastPage = currentPage;
		}

	    currentPage = pageID;
	    loadContent();
	}

	function reLoad() {
	    goPage(currentPage);
	}

	function goHome() {

		if (currentPage != 0) {
	        goPage(0);
		}
	}

	function updateTracking() {
	    
	    if (conection) {
	        // enviar aquí el "lesson_location"
	        if (!curseCompleted) {
	            if (currentPage == course.pages.length - 1) {
	                
	                // enviar aquí el "completed"
	                curseCompleted = true;

	            } else {
	                // enviar aquí el "incomplete"
	            }
	        }   
	        
	        //var success = lmsCall("Commit");
	        //if (!success){
	        //    errorAPI();
	        //}
	    }

	    //Actualización de los botones de navegación

	    if (currentPage < course.pages.length - 1) {

	        if (!navegationBlock) {
	            $('#btnNext').show(0);
	        }

	    } else {
	        $('#btnNext').hide(0);
	    }

	    if (currentPage >= 1) {
	        $('#btnPrev').show(0);
	    } else {
	        $('#btnPrev').hide(0);
	    }
	}

	function errorAPI(){
	    if (mostrarAlertas) {
	        alert('Se ha detectado un problema de comunicación con el LMS.\nSu progreso no podrá seguir siendo registrado.\nPor favor cierre el curso y vuelva a intentarlo.');
	    }
	    //console.log('Error de conexión');
	}			
	</script>
</body>
</html>